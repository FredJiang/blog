---
title: 汇编读写磁盘
date: 2017-05-01 23:29:08
tags: [masm, assembly]
---

以下内容摘自 王爽的《汇编语言（第三版）》

<!--more-->

BIOS 提供的访问磁盘的中断例程为 `int 13h`。读取 0 面 0 道 1 扇区的内容到 `0:200` 的程序如下所示。

```
mov ax,0
mov es,ax
mov bx,200h

mov al,1
mov ch,0
mov cl,1
mov dl,0
mov dh,0
mov ah,2
int 13h
```

入口参数：

* (ah)=int 13h 的功能号（2 表示读扇区）
* (al)=读取的扇区数
* (ch)=磁道号
* (cl)=扇区数
* (dh)=磁头号（对于软盘即面号，因为一个面用一个磁头来读写）
* (dl)=驱动器号（软驱从 0 开始，0：软驱 A，1：软驱 B；硬盘从 80h 开始，80h：硬盘 C，81h：硬盘 D）

es:bx 指向接收从扇区读入数据的内存区

返回参数：

* 操作成功：(ah)=0，(al)=读入的扇区数
* 操作失败：(ah)=出错代码